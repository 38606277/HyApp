(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Order"],{2338:function(t,e,s){var r=s("b2f5"),o=s("2e9a"),a=s("3a68"),n=s("acb9"),i=s("f59b");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,r=a(t),c=n.f,d=o(r),l={},u=0;while(d.length>u)s=c(r,e=d[u++]),void 0!==s&&i(l,e,s);return l}})},"2e9a":function(t,e,s){var r=s("a891"),o=s("f7c1"),a=s("a013"),n=s("3754").Reflect;t.exports=n&&n.ownKeys||function(t){var e=r.f(a(t)),s=o.f;return s?e.concat(s(t)):e}},"7ea8":function(t,e,s){"use strict";var r=s("bbef"),o=s.n(r);o.a},a891:function(t,e,s){var r=s("fb6d"),o=s("b4e0").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},acb9:function(t,e,s){var r=s("d217"),o=s("7dea"),a=s("3a68"),n=s("5325"),i=s("03b3"),c=s("568a"),d=Object.getOwnPropertyDescriptor;e.f=s("dad2")?d:function(t,e){if(t=a(t),e=n(e,!0),c)try{return d(t,e)}catch(s){}if(i(t,e))return o(!r.f.call(t,e),t[e])}},bbef:function(t,e,s){},bcc0:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"order"},[s("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":"","z-index":10,fixed:""},on:{"click-left":t.goBack}}),s("div",{staticClass:"address",attrs:{editable:!1},on:{click:t.goAddressList}},[t.hasDefaultAddress?s("div",{staticClass:"next-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1):t._e(),s("div",{staticClass:"address-item"},[s("div",{attrs:{address:"address-top"}},[s("van-icon",{attrs:{name:"location"}}),s("span",{staticClass:"user-info"},[t._v(t._s(t.hasDefaultAddress?t.defaultAddress.Name:"添加收货地址"))]),t.hasDefaultAddress?s("span",{staticClass:"phonenum"},[t._v(t._s(t.defaultAddress.Phonenum))]):t._e()],1),t.hasDefaultAddress?s("div",{staticClass:"address-bottom"},[s("div",{staticClass:"address-info"},[t._v(t._s(t.defaultAddress.Address)+t._s(t.defaultAddress.AddressDetail))])]):t._e()])]),t._l(t.orderGoodList,function(e){return s("van-panel",{key:e.Goodid,staticClass:"allGood",attrs:{title:"商品"}},[s("div",{staticClass:"allGood-item"},[s("van-card",{attrs:{title:e.Goodname,desc:e.Gooddescribe,num:e.Cartcount,price:e.GoodPriceaftersale,thumb:e.GoodImg}}),s("van-cell-group",[s("van-cell",{attrs:{title:"配送方式",value:e.Gooddealprice>0?"运费 ￥"+e.Gooddealprice:"免运费"}}),s("van-field",{attrs:{label:"留言",placeholder:"点击给买家留言"},model:{value:e.message,callback:function(s){t.$set(e,"message",s)},expression:"item.message"}}),s("van-cell",{staticStyle:{color:"#f44"},attrs:{title:"合计",value:"￥"+t.formatPrice(e.GoodPriceaftersale*e.Cartcount+e.Gooddealprice)}})],1)],1)])}),s("van-cell-group",{staticClass:"cell"},[s("van-cell",{attrs:{title:"优惠券码","is-link":"",value:"使用优惠券"}})],1),s("van-cell-group",{staticClass:"cell"},[s("van-switch-cell",{attrs:{title:"短信通知收件人"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),s("div",{staticClass:"order-footer"},[t._v("购物愉快~")]),s("van-submit-bar",{attrs:{price:t.totalMoney,"button-text":"结算"},on:{submit:t.onSubmit}})],2)])},o=[],a=(s("2338"),s("fb37"),s("a506")),n=(s("f763"),s("591a")),i=s("4ec3");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var l={data:function(){return{checked:!0,addressList:[],hasDefaultAddress:!1,defaultAddress:{}}},mounted:function(){var t=this;this.orderGood.length?Object(i["d"])().then(function(e){t.addressList=e.data,t.addressId?e.data.forEach(function(e){if(e.Addressid===t.addressId)return t.defaultAddress=e,void(t.hasDefaultAddress=!0)}):e.data.forEach(function(e){if(1===e.Isdefault)return t.defaultAddress=e,void(t.hasDefaultAddress=!0)})}).catch(function(t){console.log(t)}):this.$router.push("/")},computed:d({orderGoodList:function(){return this.orderGood.forEach(function(t){t.message=""}),this.orderGood},totalMoney:function(){var t=0;return this.orderGoodList.forEach(function(e){t+=e.GoodPriceaftersale*e.Cartcount+e.Gooddealprice}),100*t}},Object(n["b"])(["orderGood","addressId"])),methods:d({onSubmit:function(){for(var t=this,e="",s="",r=[],o=[],a=0;a<this.orderGood.length;a++)r.push(this.orderGood[a].Goodid),o.push(this.orderGood[0].Cartcount);e="("+r.toString()+")",s="("+o.toString()+")";var n={goodId:e,cartCount:s,addressId:this.defaultAddress.Addressid,totalMoney:this.totalMoney/100};Object(i["b"])(n).then(function(e){console.log(e),t.$toast.success("付款成功~");var s={delId:r};Object(i["c"])(s).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),setTimeout(function(){t.$router.push("/OrderList")},500)}).catch(function(t){console.log(t)})},formatPrice:function(t){return t.toFixed(2)},goAddressList:function(){this.setAddressList(this.addressList),this.$router.push("/AddressList")},goBack:function(){this.$router.go(-1)}},Object(n["c"])({setAddressList:"SET_ADDRESSLIST_MUTATION"}))},u=l,f=(s("7ea8"),s("6691")),h=Object(f["a"])(u,r,o,!1,null,"17c91fd8",null);e["default"]=h.exports},f59b:function(t,e,s){"use strict";var r=s("ddf7"),o=s("7dea");t.exports=function(t,e,s){e in t?r.f(t,e,o(0,s)):t[e]=s}},f763:function(t,e,s){for(var r=s("dac5"),o=s("cfc7"),a=s("e5ef"),n=s("3754"),i=s("743d"),c=s("14fc"),d=s("8b37"),l=d("iterator"),u=d("toStringTag"),f=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},b=o(h),v=0;v<b.length;v++){var p,g=b[v],m=h[g],L=n[g],O=L&&L.prototype;if(O&&(O[l]||i(O,l,f),O[u]||i(O,u,g),c[g]=f,m))for(p in r)O[p]||a(O,p,r[p],!0)}},f9f2:function(t,e,s){var r=s("b2f5"),o=s("a4cc"),a=s("b6f1");t.exports=function(t,e){var s=(o.Object||{})[t]||Object[t],n={};n[t]=e(s),r(r.S+r.F*a(function(){s(1)}),"Object",n)}},fb37:function(t,e,s){var r=s("db4b"),o=s("cfc7");s("f9f2")("keys",function(){return function(t){return o(r(t))}})}}]);
//# sourceMappingURL=Order.b9cfa992.js.map